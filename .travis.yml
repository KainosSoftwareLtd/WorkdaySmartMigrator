language: go
services:
- docker
go:
- '1.15'
- '1.16'
before_script:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
- docker-compose -f test/docker-compose.yaml up -d
script:
- "./coverage.sh"
- "./test/http-integration-tests.sh"
after_success:
- bash <(curl -s https://codecov.io/bash)
env:
  global:
  - secure: czmRB6CPZ7714fIfhtA9RZGviPz09+M9NEYpaUthuxu79uw+nH1clDnnNTPeUpPascxGKVn5NMZcjZnJnp67U7M6o5ivqxq6quExg+c9yFHF6nvWzkyehustsWhL5coE11NYcuqQTIF3k2dNYtpMZZgLiPokFWyB/hTKJgIl06S/fAVFci8dAljC1GD6gFwAmEyw6xZOQrg0fKi8XCHTtge7aTBxG08/JCz8QfMJDUZlxgzNTPw4xDMrxIfaMHPRIyGvTDN5nKvY0g1Ea+SLweLdRiwaFxNWD0Gj6Y9KCPXCMSHcTYfYsqr+IU1u0j5MJzpIxEF5KqE2Vi+8gSHN6fzv4UJUFy4sh/ma9zh7U2j+Ig7REKq+x7fBzbWTelWnplf86Vot1NRMZo/8YUPU3IItFSF4zarHHucVAHRsrp+w/M0ikw00goD8VoTJCce6/oBBBy2/lozspcJan+I1NALPR4ghajg/q91+KdQBhnM91XypcBFaMIZ0D4w0f+89Uj2IxM+jncfsNI0HUB3+tPZIz/H3XgXJ5Z7CTB1pg48pkPoXjWz4KI4RC/nPHBIr3JAZ4kE7gcOm6DR25kTZkU+GWiLQK3qQOsh8J+OUx686ZjCZPjIMP9DkdQs1F4Pi9fGXqc+I1wAKqL137BHiDgOg8irxOIxuiJGZkbkTQqg=
  - secure: m7+gZLY20A4gUkT6kpYoT6P/eS8Ro4RR7E1fMTmjzM1vqST1ym+8x1R/GdhFXUVxtRP2uqRlXM7oiOK+uDF9p280eQgV19AQRiL0WsuXXfHZKS6YURV9HcoWirQhbN3nScTmUzfwI4B5VT16c2euSDBezIDDfF09KxnXawynW59Fszz4QkkchHXDZjH5G3HcbjLIvzoI/SbQORKYmDUx+1k7y3toaQ96DuhqJ+snuSKEJ6BJg2gtGDNXWlfXHE8KKd/KzKdFKFg1s/wiR7EF1bA7ed5OahU5i1TjEqFEgbbUTWB+OvZDD5AwLI7gIfsztFOtiM3X7jLn8mQkUvSnJGe2YsANht21b9D6bdJ9Z74kre3XknXW5MDEJlR7PvA4xSO6o6aGXzbxaGNvJ1w46YskNCW9Cm/SEb7guEOH7UCMkoR2c4901udDwWrzadF8l94/DHKYU4enM4z3WUxh6vUYHxNb9sQrZd6Xe76V+cWzcu/pLHRI+eExzg3yHy5G/yJQ2GpB3JX0icUTl6W0btvP6veiBwilh7PtH1cM5Nyfgl/Gez/UO0fE6mEfoMGHqz7NhTI4qQUcmZ6ZGnGSnTUNDVqb24IX51cfDhcWCQosfpt0VM3P2B5C0ry5LfhnHKUkVSmXTdU3j0YHVeMIKfw4rxAp/+LQjJZHYPKxh7c=
  - secure: JiJNhgLYd0id5sD0qw1iWL2d+3yvv2iWeoy9erJKsv6hwhNjLQ6fSxrSXq9WN7YC+j1z5a1Tlp8reRsrldDDkWy2b8JL5edErotMi3romuKlMoXwvteBvGcg6vFX0eCKniqj6YXwXq+t8afo/5SD8ufgFgmBCXY3XK+cZRn2+FUY3UnMani0SVQcSoC+kuLCNgjqBNxOdyI8Fkwkm/M1Z2yWPUHHn/CDFnAHEKDl9JN2PWY+yNP5rxUcXWw1UqZVDI/15p0CazvW+zDl33/e2zpUukagQOtZ4o4411NAs1gIRxdPAlpRbjtGbRaPzeLd9TkfgdAVaxcDejH45I/3Of28+XhVaiVEck8L4tCWjDLyCIKE7pOmCatdFolh5WggcEbJMAuOix1cPzA3A8pbfmo7hCnt2XVKmXGUmX1J8uR9pn9KMWOL0ia+BIUAysyKKd6N2/jzUMfUjHYDDVVo29iLXiDa8AsxPuacgPPptt6HX0U04b600We5KokPZrrwven8Ihdp9pqHAkCMdF0QOcMUgE1ADf7yApHx6ZSvjrGBVyMv+usg03QQOIJYl1ZNkUKHcE0DBRCAa6PdVpN1GLqF56htspExaJbqHo3lgKUa0WePF2xayR2uTgHSgo5dtdyHqFv5aLrklQAq4xIQNu/4C1mTlw7Nl8v3GTgE4Q0=
  - secure: RtjJzMnS5Iq6LrkrXffPFG/fmjIxwnBZHnxSwr6b26yTxhajDQkejZrVxJB6QiD3ji3LsquzBdPIttC1FmpF5Ww3FtEv4OkbcnqUhGovZm8b3XL4TJM1RZE9X6Hgsfp/I8usNoXSHzRJSZJofun9LWpPxAqmRXMzsmFQOcLFnH/vkFDXU3MhsSHomr3rBGCZh4gFunHZlq3SOALKe9OQ9IEzwPlRAjIX3mwe8yi66aCjZFrY35bVJOsdYdnG4OULCwKxZMYFzbG5+CXjKPitQe8xFQM0juEOy1FBJTl63MX6UPBfGpWQj1TunNX+H07kYrlXwDAHcOQnn0ajCyQauVrP096oix2dg59rmdTUx3tNrfAo0sNTVc/l7I9C9i7EMG7rY+vmCfUj+ld7AlfzB3/ovrgp3FQZ8FEW5PcSEPiRQg62pWMdQc3+6hjbhqpaDR/wqbaOZzTgAXI8TBH27jCo8P/empQCyY/kr0oa30SYQYNc7myHPDOMvZ0O4TSMnAQ4O6Szza+kvhUerwdOhpfn5DCBDTrewCXoNLSfUjZh49vS4cqMpBG9phmL0Pbc7FGrqtibIrWSkCW+lxeiDdBHvZJqgoagFve4CPc5l2DxsgOZ3b21prBNHwQ9UMob557K/0BMFMyBBC+6rekg4uBOibqb5IdTG1112/gWMew=
